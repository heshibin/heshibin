---
slug: java知识点小记
title: java知识点小记
authors: heshibin
tags: [java]
---

## 技巧分享：什么是try-with-resource?

资源的关闭很多人停留在旧的流程上，jdk7新特性旧有，但是很多人以为是jdk8的。

<br></br>

在try(...)里声明的资源，会在try-catch代码块结束后自动关闭掉。

<br></br>

### 注意点

- 实现了AutoCloseable接口的类，在try()里声明该类实例的时候，try结束后自动调用该实例的close方法。

- 这个动作会早于finally里调用的方法，不管是否出现异常，try()里声明的实例都会被调用close方法。

- try里面可以声明多个自动关闭的对象，`越早声明的对象，会越晚被close掉`。

## 带你重新认识RestTemplate

RestTemplate是`Spring`提供的用于访问Rest服务的客户端，底层使用java.net。

通过使用`ClientHttpRequestFactory`指定不同的HTTP请求方式。

### 主要提供了两种实现

**1、SimpleClientHttpRequestFactory（默认）：**

创建底层的Http请求连接主要是createRequest方法。

每次都会创建新的连接，每次都创建连接会造成极大的资源浪费。

**2、HttpComponentsClientHttpRequestFactory：**

底层使用HttpClient访问远程的Http服务，客户端每次请求都要和服务端建立新的连接，即三次握手将会非常耗时，通过Http连接池可以减少连接建立与释放的时间，提升Http请求的性能。

Spring的restTemplate是对HttpClient进行了封装，而HttpClient支持`池化机制`。

